<!-- Vacantes Content -->
<main class="p-6">
  <!-- ===== Encabezado + Acciones ===== -->
  <div class="mb-5 flex flex-wrap items-center justify-between gap-3">
    <div class="flex items-center gap-3">
      <span class="text-2xl">üìÑ</span>
      <h1 class="text-2xl font-bold text-slate-900">
        Gesti√≥n de Vacantes
        </span>
      </h1>
    </div>

    <div class="flex items-center gap-2">
      <button
        class="inline-flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-700 hover:bg-slate-50">
        <span>üìä</span> Reportes
      </button>
      <button
        class="inline-flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-700 hover:bg-slate-50">
        <span>‚öôÔ∏è</span> Configurar
      </button>
      <a id="nuevaVacanteBtn" href="pages/nueva-vacante.html"
        class="hidden md:flex items-center gap-2 bg-fortia-primary text-white px-3 py-2 rounded hover:bg-fortia-primary/90 transition-colors">
        <span class="text-base leading-none">Ôºã</span> Nueva Vacante
      </a>
    </div>
  </div>

  <!-- ===== Cinta de Insights Inteligentes ===== -->
  <div
    class="mb-6 rounded-2xl border border-white/10 bg-gradient-to-r from-[#5B5FEA] via-[#6D45D4] to-[#8B3AA6] p-4 md:p-5">
    <!-- t√≠tulo -->
    <div class="mb-3 flex items-center gap-2 text-white/90">
      <span class="grid h-7 w-7 place-items-center rounded-lg bg-white/15 text-lg">ü§ñ</span>
      <p class="text-base font-semibold tracking-tight">Insights Inteligentes</p>
    </div>

    <!-- tarjetas -->
    <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
      <!-- Rendimiento -->
      <div
        class="rounded-xl border border-white/15 bg-white/10 p-4 text-white/90 shadow-[inset_0_1px_0_rgba(255,255,255,.08)]">
        <p class="mb-1 flex items-center gap-2 text-sm font-semibold">
          <span>üß™</span> Rendimiento Destacado
        </p>
        <p class="text-sm leading-relaxed text-white/85">
          ‚ÄúSenior React Developer‚Äù tiene 85% m√°s aplicaciones que el promedio. Considera duplicar la estrategia de
          publicaci√≥n.
        </p>
      </div>

      <!-- Acci√≥n recomendada -->
      <div
        class="rounded-xl border border-white/15 bg-white/10 p-4 text-white/90 shadow-[inset_0_1px_0_rgba(255,255,255,.08)]">
        <p class="mb-1 flex items-center gap-2 text-sm font-semibold">
          <span>‚ö°</span> Acci√≥n Recomendada
        </p>
        <p class="text-sm leading-relaxed text-white/85">
          3 vacantes requieren atenci√≥n: baja tasa de conversi√≥n. La IA sugiere ajustar descripci√≥n y keywords.
        </p>
      </div>

      <!-- Optimizaci√≥n -->
      <div
        class="rounded-xl border border-white/15 bg-white/10 p-4 text-white/90 shadow-[inset_0_1px_0_rgba(255,255,255,.08)]">
        <p class="mb-1 flex items-center gap-2 text-sm font-semibold">
          <span>üéØ</span> Optimizaci√≥n
        </p>
        <p class="text-sm leading-relaxed text-white/85">
          Mejor momento para publicar: Martes 10:00 AM. Programar siguiente vacante aumentar√° visibilidad 40%.
        </p>
      </div>
    </div>
  </div>

  <!-- ===== KPIs ===== -->
  <div class="mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-4">
    <!-- KPI 1 -->
    <div class="flex items-center gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-card">
      <span class="grid h-12 w-12 place-items-center rounded-xl bg-blue-50 text-blue-700 text-xl">üì¶</span>
      <div>
        <p class="text-[11px] font-semibold tracking-wide text-slate-400">VACANTES ACTIVAS</p>
        <p class="text-xl font-semibold text-slate-900">4</p>
      </div>
    </div>

    <!-- KPI 2 -->
    <div class="flex items-center gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-card">
      <span class="grid h-12 w-12 place-items-center rounded-xl bg-emerald-50 text-emerald-600 text-xl">üë•</span>
      <div>
        <p class="text-[11px] font-semibold tracking-wide text-slate-400">APLICACIONES</p>
        <p class="text-xl font-semibold text-slate-900">192</p>
      </div>
    </div>

    <!-- KPI 3 -->
    <div class="flex items-center gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-card">
      <span class="grid h-12 w-12 place-items-center rounded-xl bg-amber-50 text-amber-600 text-xl">‚è±Ô∏è</span>
      <div>
        <p class="text-[11px] font-semibold tracking-wide text-slate-400">D√çAS PROMEDIO</p>
        <p class="text-xl font-semibold text-slate-900">12</p>
      </div>
    </div>

    <!-- KPI 4 -->
    <div class="flex items-center gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-card">
      <span class="grid h-12 w-12 place-items-center rounded-xl bg-violet-50 text-violet-600 text-xl">üìà</span>
      <div>
        <p class="text-[11px] font-semibold tracking-wide text-slate-400">TASA √âXITO</p>
        <p class="text-xl font-semibold text-slate-900">68%</p>
      </div>
    </div>
  </div>


  <!-- Filtros -->
  <div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-card p-4 mb-4">
    <div class="flex flex-col lg:flex-row gap-3 items-center">
      <div class="relative flex-1 w-full">
        <input id="fltSearch" type="search" placeholder="Buscar por posici√≥n, departamento o reclutador‚Ä¶"
          class="w-full rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 pl-9 pr-3 py-2 text-sm focus:border-fortia-primary focus:ring focus:ring-blue-100 dark:focus:ring-blue-900">
        <span class="absolute left-3 top-2.5 text-slate-400 dark:text-slate-500">üîç</span>
      </div>

      <select id="fltState"
        class="rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 px-3 py-2 text-sm">
        <option value="">Todos los estados</option>
        <option value="ACTIVA">Activa</option>
        <option value="BORRADOR">En borrador</option>
        <option value="PAUSADA">Pausada</option>
        <option value="CERRADA">Cerrada</option>
      </select>

      <select id="fltDept"
        class="rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 px-3 py-2 text-sm">
        <option value="">Todos los departamentos</option>
        <option value="Tecnolog√≠a">Tecnolog√≠a</option>
        <option value="Dise√±o">Dise√±o</option>
        <option value="Producto">Producto</option>
        <option value="Ventas">Ventas</option>
        <option value="Marketing">Marketing</option>
      </select>

      <select id="fltRecruiter"
        class="rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 px-3 py-2 text-sm">
        <option value="">Todos los reclutadores</option>
        <option value="Ana Garc√≠a">Ana Garc√≠a</option>
        <option value="Carlos L√≥pez">Carlos L√≥pez</option>
        <option value="Mar√≠a Rodr√≠guez">Mar√≠a Rodr√≠guez</option>
        <option value="Luis Mart√≠n">Luis Mart√≠n</option>
      </select>

      <select id="fltSort"
        class="rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-200 px-3 py-2 text-sm">
        <option value="">Ordenar por</option>
        <option value="fecha">Fecha (recientes)</option>
        <option value="apps">Aplicaciones</option>
        <option value="estado">Estado</option>
      </select>

      <button
        class="inline-flex items-center gap-2 rounded-lg border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400 px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700">
        <span>‚öôÔ∏è</span> M√°s filtros
      </button>
    </div>
  </div>

  <!-- Tabs + contenido -->
  <div class="grid grid-cols-1 xl:grid-cols-12 gap-6">
    <!-- Columna lista -->
    <div class="xl:col-span-9">
      <!-- Tabs -->
      <div class="mb-3 flex items-center gap-2">
        <button data-tab="lista"
          class="tab-btn px-3 py-1.5 rounded-lg text-sm bg-fortia-primary text-white">Lista</button>
        <button data-tab="kanban"
          class="tab-btn px-3 py-1.5 rounded-lg text-sm border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700">Kanban</button>
        <button data-tab="analytics"
          class="tab-btn px-3 py-1.5 rounded-lg text-sm border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700">Analytics</button>
      </div>

      <!-- Tabla LISTA -->
      <div id="tab-lista"
        class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-card overflow-hidden">
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300">
              <tr>
                <th class="text-left px-4 py-3">Posici√≥n</th>
                <th class="text-left px-4 py-3">Departamento</th>
                <th class="text-left px-4 py-3">Estado</th>
                <th class="text-left px-4 py-3">Aplicaciones</th>
                <th class="text-left px-4 py-3">Pipeline</th>
                <th class="text-left px-4 py-3">Reclutador</th>
                <th class="text-left px-4 py-3">Publicado</th>
                <th class="text-left px-4 py-3">Acciones</th>
              </tr>
            </thead>
            <tbody id="jobsTbody" class="divide-y divide-slate-100 dark:divide-slate-700">
              <!-- Row 1 -->
              <tr class="hover:bg-slate-50/60 dark:hover:bg-slate-700/60" data-position="Senior React Developer"
                data-dept="Tecnolog√≠a" data-state="ACTIVA" data-apps="87" data-recruiter="Ana Garc√≠a"
                data-published-days="5">
                <td class="px-4 py-3">
                  <div class="font-medium text-slate-800 dark:text-slate-200">Senior React Developer</div>
                </td>
                <td class="px-4 py-3"><span
                    class="text-xs rounded-full px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300">Tecnolog√≠a</span>
                </td>
                <td class="px-4 py-3"><span
                    class="text-xs rounded-full px-2 py-1 bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300">ACTIVA</span>
                </td>
                <td class="px-4 py-3 text-slate-800 dark:text-slate-200">87</td>
                <td class="px-4 py-3 w-40">
                  <div class="h-2 w-full rounded bg-slate-100 dark:bg-slate-700">
                    <div class="h-2 rounded bg-fortia-primary dark:bg-blue-500" style="width:45%"></div>
                  </div>
                </td>
                <td class="px-4 py-3 text-slate-800 dark:text-slate-200">Ana Garc√≠a</td>
                <td class="px-4 py-3 text-slate-500 dark:text-slate-400">Hace 5 d√≠as</td>
                <td class="px-4 py-3">
                  <div class="flex items-center gap-2">
                    <button data-action="view-candidates"
                      class="px-2 py-1 rounded bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-xs hover:bg-blue-100 dark:hover:bg-blue-800">Ver
                      Candidatos</button>
                    <button data-action="edit-job"
                      class="px-2 py-1 rounded bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-xs hover:bg-slate-200 dark:hover:bg-slate-600">Editar</button>
                  </div>
                </td>
              </tr>

              <!-- Row 2 -->
              <tr class="hover:bg-slate-50/60 dark:hover:bg-slate-700/60" data-position="Product Manager"
                data-dept="Producto" data-state="ACTIVA" data-apps="43" data-recruiter="Carlos L√≥pez"
                data-published-days="3">
                <td class="px-4 py-3">
                  <div class="font-medium text-slate-800 dark:text-slate-200">Product Manager</div>
                </td>
                <td class="px-4 py-3"><span
                    class="text-xs rounded-full px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300">Producto</span>
                </td>
                <td class="px-4 py-3"><span
                    class="text-xs rounded-full px-2 py-1 bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300">ACTIVA</span>
                </td>
                <td class="px-4 py-3 text-slate-800 dark:text-slate-200">43</td>
                <td class="px-4 py-3 w-40">
                  <div class="h-2 w-full rounded bg-slate-100 dark:bg-slate-700">
                    <div class="h-2 rounded bg-fortia-primary dark:bg-blue-500" style="width:30%"></div>
                  </div>
                </td>
                <td class="px-4 py-3 text-slate-800 dark:text-slate-200">Carlos L√≥pez</td>
                <td class="px-4 py-3 text-slate-500 dark:text-slate-400">Hace 3 d√≠as</td>
                <td class="px-4 py-3">
                  <div class="flex items-center gap-2">
                    <button data-action="view-candidates"
                      class="px-2 py-1 rounded bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-xs hover:bg-blue-100 dark:hover:bg-blue-800">Ver
                      Candidatos</button>
                    <button data-action="edit-job"
                      class="px-2 py-1 rounded bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-xs hover:bg-slate-200 dark:hover:bg-slate-600">Editar</button>
                  </div>
                </td>
              </tr>

              <!-- Row 3 -->
              <tr class="hover:bg-slate-50/60 dark:hover:bg-slate-700/60" data-position="UX/UI Designer"
                data-dept="Dise√±o" data-state="BORRADOR" data-apps="0" data-recruiter="Mar√≠a Rodr√≠guez"
                data-published-days="9999">
                <td class="px-4 py-3">
                  <div class="font-medium text-slate-800 dark:text-slate-200">UX/UI Designer</div>
                </td>
                <td class="px-4 py-3"><span
                    class="text-xs rounded-full px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300">Dise√±o</span>
                </td>
                <td class="px-4 py-3"><span
                    class="text-xs rounded-full px-2 py-1 bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300">BORRADOR</span>
                </td>
                <td class="px-4 py-3 text-slate-800 dark:text-slate-200">0</td>
                <td class="px-4 py-3 w-40 text-slate-400 dark:text-slate-500 italic">Sin pipeline</td>
                <td class="px-4 py-3 text-slate-800 dark:text-slate-200">Mar√≠a Rodr√≠guez</td>
                <td class="px-4 py-3 text-slate-500 dark:text-slate-400">Sin publicar</td>
                <td class="px-4 py-3">
                  <div class="flex items-center gap-2">
                    <button data-action="view-candidates"
                      class="px-2 py-1 rounded bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-xs hover:bg-blue-100 dark:hover:bg-blue-800">Ver
                      Candidatos</button>
                    <button data-action="edit-job"
                      class="px-2 py-1 rounded bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-xs hover:bg-slate-200 dark:hover:bg-slate-600">Editar</button>
                  </div>
                </td>
              </tr>

              <!-- Row 4 -->
              <tr class="hover:bg-slate-50/60 dark:hover:bg-slate-700/60" data-position="DevOps Engineer"
                data-dept="Tecnolog√≠a" data-state="PAUSADA" data-apps="62" data-recruiter="Luis Mart√≠n"
                data-published-days="12">
                <td class="px-4 py-3">
                  <div class="font-medium text-slate-800 dark:text-slate-200">DevOps Engineer</div>
                </td>
                <td class="px-4 py-3"><span
                    class="text-xs rounded-full px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300">Tecnolog√≠a</span>
                </td>
                <td class="px-4 py-3"><span
                    class="text-xs rounded-full px-2 py-1 bg-rose-100 dark:bg-rose-900 text-rose-700 dark:text-rose-300">PAUSADA</span>
                </td>
                <td class="px-4 py-3 text-slate-800 dark:text-slate-200">62</td>
                <td class="px-4 py-3 w-40">
                  <div class="h-2 w-full rounded bg-slate-100 dark:bg-slate-700">
                    <div class="h-2 rounded bg-fortia-primary dark:bg-blue-500" style="width:52%"></div>
                  </div>
                </td>
                <td class="px-4 py-3 text-slate-800 dark:text-slate-200">Luis Mart√≠n</td>
                <td class="px-4 py-3 text-slate-500 dark:text-slate-400">Hace 12 d√≠as</td>
                <td class="px-4 py-3">
                  <div class="flex items-center gap-2">
                    <button data-action="view-candidates"
                      class="px-2 py-1 rounded bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-xs hover:bg-blue-100 dark:hover:bg-blue-800">Ver
                      Candidatos</button>
                    <button data-action="edit-job"
                      class="px-2 py-1 rounded bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-xs hover:bg-slate-200 dark:hover:bg-slate-600">Editar</button>
                  </div>
                </td>
              </tr>

              <!-- No results -->
              <tr id="noResultsRow" class="hidden">
                <td colspan="8" class="px-4 py-6 text-center text-slate-500 dark:text-slate-400">No se encontraron
                  vacantes con esos filtros.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Kanban Board -->
      <div id="tab-kanban" class="hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          
          <!-- Columna: Borrador -->
          <div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-card">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold text-slate-800 dark:text-slate-200 flex items-center gap-2">
                  <span class="w-3 h-3 bg-gray-500 rounded-full"></span>
                  Borrador
                </h3>
                <span class="kanban-count bg-gray-100 dark:bg-gray-900 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded-full">1</span>
              </div>
            </div>
            <div class="kanban-cards p-3 min-h-[400px] space-y-3" data-status="BORRADOR">
              <!-- Tarjeta de prueba est√°tica -->
              <div class="kanban-card bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-4 cursor-move shadow-sm hover:shadow-md transition-shadow" 
                   draggable="true" 
                   data-position="UX/UI Designer Test" 
                   data-state="BORRADOR">
                <div class="flex items-start justify-between mb-3">
                  <h4 class="font-semibold text-slate-800 dark:text-slate-200 text-sm leading-tight">UX/UI Designer Test</h4>
                  <span class="text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300">BORRADOR</span>
                </div>
                
                <div class="space-y-2 text-xs text-slate-600 dark:text-slate-400">
                  <div class="flex items-center gap-2">
                    <span>üè¢</span>
                    <span>Dise√±o</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span>üë•</span>
                    <span>0 aplicaciones</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span>üë§</span>
                    <span>Mar√≠a Rodr√≠guez</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span>üìÖ</span>
                    <span>hace 2 horas</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Columna: Activa -->
          <div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-card">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold text-slate-800 dark:text-slate-200 flex items-center gap-2">
                  <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                  Activa
                </h3>
                <span class="kanban-count bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300 text-xs px-2 py-1 rounded-full">1</span>
              </div>
            </div>
            <div class="kanban-cards p-3 min-h-[400px] space-y-3" data-status="ACTIVA">
              <!-- Tarjeta de prueba est√°tica -->
              <div class="kanban-card bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-4 cursor-move shadow-sm hover:shadow-md transition-shadow" 
                   draggable="true" 
                   data-position="React Developer Test" 
                   data-state="ACTIVA">
                <div class="flex items-start justify-between mb-3">
                  <h4 class="font-semibold text-slate-800 dark:text-slate-200 text-sm leading-tight">React Developer Test</h4>
                  <span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300">ACTIVA</span>
                </div>
                
                <div class="space-y-2 text-xs text-slate-600 dark:text-slate-400">
                  <div class="flex items-center gap-2">
                    <span>üè¢</span>
                    <span>Tecnolog√≠a</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span>üë•</span>
                    <span>87 aplicaciones</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span>üë§</span>
                    <span>Ana Garc√≠a</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span>üìÖ</span>
                    <span>hace 1 d√≠a</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Columna: Pausada -->
          <div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-card">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold text-slate-800 dark:text-slate-200 flex items-center gap-2">
                  <span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
                  Pausada
                </h3>
                <span class="kanban-count bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-300 text-xs px-2 py-1 rounded-full">0</span>
              </div>
            </div>
            <div class="kanban-cards p-3 min-h-[400px] space-y-3" data-status="PAUSADA">
              <!-- Las tarjetas se mover√°n aqu√≠ din√°micamente -->
            </div>
          </div>

          <!-- Columna: Cerrada -->
          <div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-card">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold text-slate-800 dark:text-slate-200 flex items-center gap-2">
                  <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                  Cerrada
                </h3>
                <span class="kanban-count bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300 text-xs px-2 py-1 rounded-full">0</span>
              </div>
            </div>
            <div class="kanban-cards p-3 min-h-[400px] space-y-3" data-status="CERRADA">
              <!-- Las tarjetas se mover√°n aqu√≠ din√°micamente -->
            </div>
          </div>

        </div>
      </div>

      <!-- Analytics (placeholder) -->
      <div id="tab-analytics"
        class="hidden bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-card p-6">
        <p class="text-slate-600 dark:text-slate-400 text-sm">Panel de analytics pr√≥ximamente‚Ä¶</p>
      </div>
    </div>

    <!-- Rail derecho: AI Insights -->
    <aside class="xl:col-span-3">
      <div
        class="bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-card p-4 sticky top-6">
        <div class="flex items-center justify-between mb-3">
          <div class="flex items-center gap-2">
            <span
              class="grid h-8 w-8 place-items-center rounded-lg bg-fortia-primary/10 dark:bg-blue-900/30 text-fortia-primary dark:text-blue-400">ü§ñ</span>
            <p class="font-medium text-slate-800 dark:text-slate-200">AI Insights</p>
          </div>
          <button
            class="text-sm rounded border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400 px-2 py-1 hover:bg-slate-50 dark:hover:bg-slate-700">Actualizar</button>
        </div>

        <ul class="space-y-3 text-sm">
          <li class="rounded-lg border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 p-3">
            <p class="font-medium text-slate-800 dark:text-slate-200">Recomendaci√≥n</p>
            <p class="text-slate-600 dark:text-slate-400 mt-1">La vacante de <span class="font-semibold">Senior React
                Developer</span> tiene alta demanda.
              Considera aumentar el salario en un 10% para atraer mejores candidatos.</p>
          </li>
          <li
            class="rounded-lg border border-emerald-200 dark:border-emerald-800 bg-emerald-50 dark:bg-emerald-900/30 p-3">
            <p class="font-medium text-slate-800 dark:text-slate-200">Tendencia</p>
            <p class="text-slate-600 dark:text-slate-400 mt-1">Las vacantes de <span
                class="font-semibold">Tecnolog√≠a</span> reciben 3x m√°s aplicaciones que otras √°reas.</p>
          </li>
          <li class="rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/30 p-3">
            <p class="font-medium text-slate-800 dark:text-slate-200">Alerta</p>
            <p class="text-slate-600 dark:text-slate-400 mt-1">La vacante <span class="font-semibold">DevOps
                Engineer</span> est√° pausada hace 12 d√≠as. ¬øReactivar?</p>
          </li>
        </ul>
      </div>
    </aside>
  </div>

  <!-- Paginaci√≥n -->
  <div class="mt-6 flex items-center justify-between">
    <p class="text-sm text-slate-600 dark:text-slate-400">Mostrando 1-4 de 4 vacantes</p>
    <div class="flex items-center gap-2">
      <button
        class="px-3 py-2 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400 rounded text-sm hover:bg-slate-50 dark:hover:bg-slate-700">‚Üê
        Anterior</button>
      <button class="px-3 py-2 bg-fortia-primary text-white rounded text-sm">1</button>
      <button
        class="px-3 py-2 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400 rounded text-sm hover:bg-slate-50 dark:hover:bg-slate-700">2</button>
      <button
        class="px-3 py-2 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400 rounded text-sm hover:bg-slate-50 dark:hover:bg-slate-700">3</button>
      <button
        class="px-3 py-2 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-400 rounded text-sm hover:bg-slate-50 dark:hover:bg-slate-700">Siguiente
        ‚Üí</button>
    </div>
  </div>
</main>

<script>
// ===== SISTEMA DE FILTROS DE VACANTES =====
let vacantesFiltersInitialized = false;

function initVacantesFilters() {
  if (vacantesFiltersInitialized) {
    console.log('üéØ Filtros de vacantes ya inicializados');
    return;
  }

  console.log('üéØ Iniciando filtros de vacantes...');
  
  // Elementos
  const tbody = document.getElementById('jobsTbody');
  const noRow = document.getElementById('noResultsRow');
  const searchInput = document.getElementById('fltSearch');
  const stateSelect = document.getElementById('fltState');
  const deptSelect = document.getElementById('fltDept');
  const recruiterSelect = document.getElementById('fltRecruiter');
  const sortSelect = document.getElementById('fltSort');
  
  if (!tbody) {
    console.error('‚ùå No se encontr√≥ jobsTbody, reintentando...');
    setTimeout(initVacantesFilters, 200);
    return;
  }
  
  console.log('‚úÖ Elementos encontrados:', {
    tbody: !!tbody,
    searchInput: !!searchInput,
    stateSelect: !!stateSelect,
    deptSelect: !!deptSelect,
    recruiterSelect: !!recruiterSelect,
    sortSelect: !!sortSelect
  });

  function removeAccents(str) {
    return (str || '').normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
  }

  function filterJobs() {
    console.log('üîç Aplicando filtros de vacantes...');
    
    const searchTerm = removeAccents(searchInput ? searchInput.value : '');
    const stateFilter = stateSelect ? stateSelect.value : '';
    const deptFilter = deptSelect ? deptSelect.value : '';
    const recruiterFilter = recruiterSelect ? recruiterSelect.value : '';
    const sortBy = sortSelect ? sortSelect.value : '';

    const allRows = tbody.querySelectorAll('tr[data-position]');
    const visibleRows = [];

    allRows.forEach(function(row) {
      let show = true;
      const data = row.dataset;

      // Filtro de b√∫squeda
      if (searchTerm && show) {
        const searchText = removeAccents(
          (data.position || '') + ' ' + 
          (data.department || '') + ' ' + 
          (data.recruiter || '')
        );
        show = searchText.includes(searchTerm);
      }

      // Filtro por estado
      if (stateFilter && show) {
        show = data.state === stateFilter;
      }

      // Filtro por departamento
      if (deptFilter && show) {
        show = data.department === deptFilter;
      }

      // Filtro por reclutador
      if (recruiterFilter && show) {
        show = data.recruiter === recruiterFilter;
      }

      // Mostrar u ocultar fila
      if (show) {
        row.style.display = '';
        visibleRows.push(row);
      } else {
        row.style.display = 'none';
      }
    });

    // Ordenamiento
    if (sortBy && visibleRows.length > 0) {
      const stateOrder = {
        'ACTIVA': 1,
        'BORRADOR': 2,
        'PAUSADA': 3,
        'CERRADA': 4
      };
      
      visibleRows.sort(function(a, b) {
        const dataA = a.dataset;
        const dataB = b.dataset;
        
        switch (sortBy) {
          case 'position':
            return (dataA.position || '').localeCompare(dataB.position || '');
          case 'department':
            return (dataA.department || '').localeCompare(dataB.department || '');
          case 'date':
            return new Date(dataB.date || 0) - new Date(dataA.date || 0);
          case 'state':
            return (stateOrder[dataA.state] || 999) - (stateOrder[dataB.state] || 999);
          case 'candidates':
            return Number(dataB.candidates || 0) - Number(dataA.candidates || 0);
          default:
            return 0;
        }
      });

      visibleRows.forEach(function(row) {
        tbody.appendChild(row);
      });
    }

    // Mostrar mensaje de sin resultados
    if (noRow) {
      if (visibleRows.length === 0) {
        noRow.style.display = '';
        tbody.appendChild(noRow);
      } else {
        noRow.style.display = 'none';
      }
    }

    console.log(`üîç Filtros aplicados: ${visibleRows.length} vacantes visibles`);
  }

  // Event listeners
  let debounceTimer;
  
  if (searchInput) {
    searchInput.addEventListener('input', function() {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(filterJobs, 300);
    });
  }

  if (stateSelect) {
    stateSelect.addEventListener('change', filterJobs);
  }

  if (deptSelect) {
    deptSelect.addEventListener('change', filterJobs);
  }

  if (recruiterSelect) {
    recruiterSelect.addEventListener('change', filterJobs);
  }

  if (sortSelect) {
    sortSelect.addEventListener('change', filterJobs);
  }

  // Acciones de botones
  if (tbody) {
    tbody.addEventListener('click', function(e) {
      const button = e.target.closest('button');
      if (!button) return;

      const row = button.closest('tr[data-position]');
      if (!row) return;

      const position = row.dataset.position || 'Vacante';
      const action = button.dataset.action;

      switch (action) {
        case 'view':
          alert('Ver detalles de: ' + position);
          break;
        case 'edit':
          alert('Editar: ' + position);
          break;
        case 'pause':
          alert('Pausar: ' + position);
          break;
        case 'close':
          if (confirm('¬øCerrar la vacante ' + position + '?')) {
            alert(position + ' ha sido cerrada');
          }
          break;
        case 'duplicate':
          alert('Duplicar: ' + position);
          break;
        default:
          console.log('Acci√≥n no reconocida:', action);
      }
    });
  }

  // Aplicar filtros iniciales
  filterJobs();
  vacantesFiltersInitialized = true;
  console.log('‚úÖ Filtros de vacantes inicializados correctamente');
}

// ===== VARIABLES GLOBALES =====
let vacantesSystemsInitialized = false;
let draggedCard = null;

// ===== INICIALIZACI√ìN PRINCIPAL =====
document.addEventListener('DOMContentLoaded', function() {
  console.log('üéØ Iniciando sistemas de vacantes...');
  
  setTimeout(() => {
    if (!vacantesSystemsInitialized) {
      initAllVacanteSystems();
      vacantesSystemsInitialized = true;
    }
  }, 300);
});

function initAllVacanteSystems() {
  console.log('üéØ Inicializando todos los sistemas de vacantes...');
  
  // Inicializar filtros
  initVacantesFilters();
  
  // Inicializar sistema de tabs
  initTabSystem();
  
  // Inicializar Kanban
  initKanbanSystem();
  
  console.log('‚úÖ Todos los sistemas de vacantes inicializados');
}

// ===== SISTEMA DE TABS =====
function initTabSystem() {
  console.log('üéØ Inicializando sistema de tabs...');
  
  const tabButtons = document.querySelectorAll('[data-tab]');
  const tabContents = {
    'lista': document.getElementById('tab-lista'),
    'kanban': document.getElementById('tab-kanban'),
    'analytics': document.getElementById('tab-analytics')
  };

  let activeTab = 'lista';

  function switchTab(tabName) {
    console.log(`üéØ Cambiando a tab: ${tabName}`);
    
    // Actualizar botones
    tabButtons.forEach(btn => {
      if (btn.dataset.tab === tabName) {
        btn.classList.add('bg-fortia-primary', 'text-white');
        btn.classList.remove('text-slate-600', 'dark:text-slate-400', 'hover:text-slate-800', 'dark:hover:text-slate-200');
      } else {
        btn.classList.remove('bg-fortia-primary', 'text-white');
        btn.classList.add('text-slate-600', 'dark:text-slate-400', 'hover:text-slate-800', 'dark:hover:text-slate-200');
      }
    });

    // Actualizar contenidos
    Object.keys(tabContents).forEach(tab => {
      if (tab === tabName) {
        tabContents[tab].classList.remove('hidden');
      } else {
        tabContents[tab].classList.add('hidden');
      }
    });

    // Acciones espec√≠ficas por tab
    if (tabName === 'kanban') {
      setTimeout(() => {
        initKanban();
        console.log('üéØ Kanban activado');
      }, 100);
    }

    activeTab = tabName;
  }

  // Event listeners para tabs
  tabButtons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      switchTab(btn.dataset.tab);
    });
  });
  
  console.log('‚úÖ Sistema de tabs inicializado');
}

// ===== SISTEMA KANBAN =====
function initKanbanSystem() {
  console.log('üéØ Inicializando sistema Kanban...');
  
  // Agregar estilos CSS para drag and drop
  addKanbanStyles();
  
  console.log('‚úÖ Sistema Kanban preparado');
}

function initKanban() {
  console.log('üéØ Activando Kanban...');
  updateKanbanCounts();
  initDragAndDrop();
}

function updateKanbanCounts() {
  const columns = document.querySelectorAll('.kanban-cards');
  columns.forEach(column => {
    const cards = column.querySelectorAll('.kanban-card');
    const count = cards.length;
    const countBadge = column.parentElement.querySelector('.kanban-count');
    if (countBadge) {
      countBadge.textContent = count;
    }
  });
  console.log('üìä Contadores de Kanban actualizados');
}

function initDragAndDrop() {
  console.log('üéØ Inicializando drag and drop...');
  
  // Remover event listeners existentes para evitar duplicados
  document.removeEventListener('dragstart', handleDragStart);
  document.removeEventListener('dragend', handleDragEnd);
  
  // Agregar event listeners
  document.addEventListener('dragstart', handleDragStart);
  document.addEventListener('dragend', handleDragEnd);

  // Configurar columnas
  document.querySelectorAll('.kanban-cards').forEach(column => {
    // Remover listeners existentes
    column.removeEventListener('dragover', handleDragOver);
    column.removeEventListener('dragleave', handleDragLeave);
    column.removeEventListener('drop', handleDrop);
    
    // Agregar nuevos listeners
    column.addEventListener('dragover', handleDragOver);
    column.addEventListener('dragleave', handleDragLeave);
    column.addEventListener('drop', handleDrop);
  });

  console.log('‚úÖ Drag and drop configurado correctamente');
}

// ===== FUNCIONES DE DRAG AND DROP =====
function handleDragStart(e) {
  if (e.target.classList.contains('kanban-card')) {
    draggedCard = e.target;
    e.target.style.opacity = '0.5';
    e.target.classList.add('dragging');
    console.log('üéØ Drag iniciado:', e.target.dataset.position);
  }
}

function handleDragEnd(e) {
  if (e.target.classList.contains('kanban-card')) {
    e.target.style.opacity = '1';
    e.target.classList.remove('dragging');
    draggedCard = null;
    console.log('üéØ Drag terminado');
  }
}

function handleDragOver(e) {
  e.preventDefault();
  e.currentTarget.classList.add('drag-over');
  console.log('üéØ Drag over columna:', e.currentTarget.dataset.status);
}

function handleDragLeave(e) {
  if (!e.currentTarget.contains(e.relatedTarget)) {
    e.currentTarget.classList.remove('drag-over');
  }
}

function handleDrop(e) {
  e.preventDefault();
  const column = e.currentTarget;
  column.classList.remove('drag-over');
  
  if (draggedCard) {
    const newStatus = column.dataset.status;
    const oldStatus = draggedCard.dataset.state;
    
    console.log(`üéØ Drop: ${oldStatus} ‚Üí ${newStatus}`);
    
    if (newStatus !== oldStatus) {
      // Mover la tarjeta
      column.appendChild(draggedCard);
      
      // Actualizar el estado de la tarjeta
      draggedCard.dataset.state = newStatus;
      
      // Actualizar el badge de estado en la tarjeta
      const stateBadge = draggedCard.querySelector('span[class*="px-2 py-1 rounded-full"]');
      if (stateBadge) {
        const stateColors = {
          'BORRADOR': 'bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300',
          'ACTIVA': 'bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300',
          'PAUSADA': 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300',
          'CERRADA': 'bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300'
        };
        stateBadge.className = `text-xs px-2 py-1 rounded-full ${stateColors[newStatus]}`;
        stateBadge.textContent = newStatus;
      }
      
      // Actualizar contadores
      updateKanbanCounts();
      
      // Mostrar notificaci√≥n de √©xito
      console.log(`‚úÖ Vacante "${draggedCard.dataset.position}" movida de ${oldStatus} a ${newStatus}`);
      
      // Mostrar notificaci√≥n visual
      showKanbanNotification(`Vacante movida a ${newStatus}`, 'success');
    }
  }
}

function showKanbanNotification(message, type = 'info') {
  // Crear notificaci√≥n temporal
  const notification = document.createElement('div');
  notification.className = `fixed top-4 right-4 px-4 py-2 rounded-lg text-white z-50 transition-all duration-300 ${
    type === 'success' ? 'bg-green-500' : 'bg-blue-500'
  }`;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  // Remover despu√©s de 3 segundos
  setTimeout(() => {
    notification.remove();
  }, 3000);
}

function addKanbanStyles() {
  // Verificar si ya existen los estilos
  if (document.getElementById('kanban-styles')) {
    return;
  }
  
  const style = document.createElement('style');
  style.id = 'kanban-styles';
  style.textContent = `
    .kanban-card.dragging {
      transform: rotate(5deg);
      z-index: 1000;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }
    
    .kanban-cards.drag-over {
      background-color: rgba(59, 130, 246, 0.1) !important;
      border: 2px dashed #3b82f6 !important;
      border-radius: 8px;
    }
    
    .kanban-card {
      transition: all 0.2s ease;
    }
    
    .kanban-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
  `;
  document.head.appendChild(style);
  console.log('‚úÖ Estilos de Kanban agregados');
}

console.log('üéØ Sistemas de vacantes completamente cargados');
</script>